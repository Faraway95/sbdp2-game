# 上班打牌！肉鸽版 (Project Burnout)

一款融合现代职场讽刺与单人肉鸽卡牌玩法的策略游戏。玩家将扮演一位身心俱疲但仍要奋力求生的职场人，在一个程序化生成的、充满荒诞事件和挑战的公司中，通过构筑由"同事"组成的卡组，来"解决"一系列棘手的"工作任务"。

## 🎮 游戏特色

- **精致荒谬**的设计风格：企业级外观下的职场黑色幽默
- **肉鸽卡牌**玩法：每次游戏都是全新的职场修罗场体验
- **职场主题**卡牌：甩锅、摸鱼、画饼、需求变更等真实职场技能
- **项目管理**式界面：像使用Jira一样游玩
- **讽刺性**遗物系统：人体工学椅、永动机咖啡等办公室神器

## 🚀 快速开始

### 在线游玩
访问 [GitHub Pages 部署版本](https://your-username.github.io/SBDP2/) 即可开始游戏。

### 本地运行

1. **克隆项目**
```bash
git clone https://github.com/your-username/SBDP2.git
cd SBDP2
```

2. **安装依赖**
```bash
pip install -r requirements.txt
```

3. **运行游戏**
```bash
python app.py
```

4. **访问游戏**
打开浏览器访问 http://localhost:5000

## 🎯 游戏玩法

### 基础概念
- **心态值**：你的生命值，降到0就精神崩溃
- **精力**：每回合的行动点数，用于打出卡牌
- **预算**：购买道具和服务的货币
- **格挡**：抵挡敌人攻击的防御值

### 卡牌类型
- **攻击卡**：对敌人造成"业绩压力"
- **技能卡**：提供增益效果或特殊能力
- **能力卡**：持续生效的被动技能

### 地图系统（杀戮尖塔风格）
游戏采用层级式地图结构，包含5个主要层级：

1. **第1层 - 初级挑战**：实习生、产品经理、UI设计师
2. **第2层 - 混合节点**：茶水间（商店）、会议室（事件）、技术主管（战斗）
3. **第3层 - 进阶挑战**：运营总监、人事部（遗物）、财务经理
4. **第4层 - 最终准备**：副总裁、CEO办公室外（商店）、董事会（事件）
5. **第5层 - 最终BOSS**：CEO决战

#### 节点类型
- 🔴 **战斗节点**：与职场敌人战斗，获得金钱奖励
- 🟠 **商店节点**：使用预算购买卡牌和遗物
- 🟣 **事件节点**：随机事件，风险与机遇并存
- 🟢 **遗物节点**：获得强力办公室装备
- ⚫ **BOSS节点**：挑战最终boss

## 🛠️ 配置文件系统

游戏支持通过CSV配置文件自定义内容，方便关卡设计和数值调整：

### 地图节点配置 (`map_nodes_config.csv`)
控制地图中每个节点的属性：

| 字段 | 说明 | 示例 |
|------|------|------|
| 层级 | 节点所在层级 | 1, 2, 3, 4, 5 |
| 节点ID | 唯一标识符 | 1-1, 2-3, 5-1 |
| 节点类型 | 节点功能类型 | 战斗, 商店, 事件, 遗物, Boss |
| 节点名称 | 显示名称 | 实习生, 茶水间, CEO |
| 描述 | 节点描述文本 | 一个什么都不懂的新人 |
| 连接节点 | 连接的下层节点 | 2-1;2-2 |
| 奖励类型 | 完成后的奖励 | 金钱, 遗物, 随机 |
| 奖励数值 | 奖励的具体数值 | 15, 20, 25 |
| 特殊效果 | 特殊机制描述 | 购买卡牌和遗物 |
| 图标 | 节点显示图标 | 👶, ☕, 👑 |
| 解锁条件 | 节点解锁要求 | 完成层级1任意节点 |

### 卡牌配置 (`cards_config.csv`)
控制所有卡牌的属性和效果：

| 字段 | 说明 | 示例 |
|------|------|------|
| 卡牌ID | 程序内部标识 | blame_shift, slack_off |
| 中文名 | 卡牌显示名称 | 甩锅, 摸鱼 |
| 英文名 | 英文名称 | Blame Shift, Slack Off |
| 消耗精力 | 使用卡牌消耗的精力 | 1, 2, 0 |
| 类型 | 卡牌类型 | 攻击, 技能, 能力 |
| 稀有度 | 卡牌稀有度 | 普通, 常见, 稀有, 传说 |
| 伤害 | 造成的伤害值 | 7, 10, 25 |
| 格挡 | 提供的格挡值 | 5, 8, 12 |
| 抽牌 | 额外抽牌数量 | 1, 2, 3 |
| 获得精力 | 获得的额外精力 | 1, 2 |
| 特殊效果 | 特殊机制描述 | 施加1层【问责】 |
| 描述 | 卡牌效果描述 | 这事儿从一开始就不是我负责的 |
| 配图建议 | 推荐使用的图标 | 🎯, 🐟, 🥧 |
| 获得途径 | 卡牌获得方式 | 初始卡组, 商店, BOSS奖励 |

### 遗物配置 (`relics_config.csv`)
控制遗物（装备）的属性和效果：

| 字段 | 说明 | 示例 |
|------|------|------|
| 遗物ID | 程序内部标识 | macbook_pro, coffee_machine |
| 中文名 | 遗物显示名称 | 苹果电脑, 咖啡机 |
| 英文名 | 英文名称 | MacBook Pro, Coffee Machine |
| 稀有度 | 遗物稀有度 | 常见, 稀有, 传说 |
| 效果类型 | 效果分类 | 每回合抽牌, 精力回复, 最大血量 |
| 数值效果 | 效果的具体数值 | 1, 15, 1 |
| 描述 | 遗物效果描述 | 每回合开始时额外抽1张牌 |
| 配图建议 | 推荐使用的图标 | 💻, ☕, 🪑 |
| 获得途径 | 遗物获得方式 | 商店, 遗物奖励, BOSS奖励 |

### 战斗特效配置 (`battle_effects_config.csv`)
控制所有战斗中的增益/减益效果：

| 字段 | 说明 | 示例 |
|------|------|------|
| 特效ID | 程序内部标识 | strength, burnout, inspiration |
| 中文名 | 特效显示名称 | 力量, 疲惫, 灵感 |
| 英文名 | 英文名称 | Strength, Burnout, Inspiration |
| 类型 | 特效分类 | 增益, 减益 |
| 持续回合 | 持续回合数 | 3, 永久, 1 |
| 叠加上限 | 最大叠加层数 | 99, 5, 10 |
| 每回合效果 | 回合触发效果 | 攻击伤害+X, 失去X血量 |
| 消失条件 | 特效移除条件 | 回合结束减1层, 抵挡负面效果时移除 |
| 图标 | 特效显示图标 | 💪, 😩, 💡 |
| 描述 | 特效详细说明 | 每层使攻击牌伤害+1 |
| 正面效果 | 是否为正面效果 | 是, 否 |

### 事件配置 (`events_config.csv`)
控制随机事件的内容和选项：

| 字段 | 说明 | 示例 |
|------|------|------|
| 事件ID | 程序内部标识 | printer_find, overtime_choice |
| 事件名称 | 事件标题 | 遗忘的打印机, 深夜加班 |
| 描述 | 事件情况描述 | 在角落发现了一台布满灰尘的打印机 |
| 选项1文本 | 第一个选项文字 | 修好它, 坚持完成 |
| 选项1效果 | 第一个选项效果 | money:20, money:30;burnout:2 |
| 选项2文本 | 第二个选项文字 | 无视它, 摸鱼回家 |
| 选项2效果 | 第二个选项效果 | nothing, hp:5 |
| 选项3文本 | 第三个选项文字 | 举报给IT, 喝咖啡继续 |
| 选项3效果 | 第三个选项效果 | money:10;inspiration:1, energy:1;inspiration:1 |
| 触发条件 | 事件触发条件 | 无, 拥有特定遗物 |
| 图标 | 事件显示图标 | 🖨️, 🌙, 👔 |

#### 特效和效果格式说明

**特效格式**：使用 `特效ID:层数` 的格式，多个特效用分号分隔
- 示例：`strength:2` (获得2层力量)
- 多重效果：`money:20;inspiration:1` (获得20金钱和1层灵感)

**卡牌特效栏位**：
- **施加特效**：对敌人施加的效果 (如 `weak:2` 给敌人2层虚弱)
- **移除特效**：移除目标的效果 (如 `burnout:1` 移除1层疲惫)
- **自身特效**：对自己的特殊效果 (如 `hits:4` 攻击4次)

**BOSS特效**：BOSS战斗开始时自动获得的特效
- 格式：`strength:2;artifact:1` (获得2层力量和1层神器)

### 如何编辑配置文件

1. **使用Excel或类似软件**打开CSV文件
2. **直接编辑**相应的数值和文本
3. **保存为CSV格式**（确保使用UTF-8编码）
4. **重启游戏**，新配置将自动生效

#### 编辑注意事项
- 保持CSV文件的表头不变
- 数值字段请填入数字，文本字段可包含中文
- 多个连接节点用分号(;)分隔
- 图标建议使用Emoji表情符号
- 修改后需重启游戏服务器才能生效

### 经典卡牌
- **甩锅** (1精力)：造成7点业绩压力，施加问责
- **摸鱼** (1精力)：获得5点心理防线，抽1张牌
- **画饼** (0精力)：获得2点精力，抽3张牌，下回合失去3点精力
- **需求变更** (2精力)：造成4次2点业绩压力
- **向上管理** (1精力)：获得8点心理防线，下回合获得1点额外精力

## 🛠️ 技术栈

- **后端**：Python Flask + SQLAlchemy
- **前端**：HTML5 + CSS3 + Vanilla JavaScript
- **数据库**：SQLite
- **部署**：GitHub Pages + Heroku/Railway

## 📁 项目结构

```
SBDP2/
├── app.py                 # Flask 主应用
├── game_data.py          # 游戏数据模型
├── requirements.txt      # Python 依赖
├── templates/
│   ├── index.html       # 主页面
│   └── game.html        # 游戏界面
├── static/
│   ├── css/
│   │   ├── style.css    # 主样式
│   │   └── game.css     # 游戏样式
│   └── js/
│       ├── main.js      # 主页逻辑
│       └── game.js      # 游戏逻辑
└── README.md
```

## 🎨 设计理念

本游戏采用"精致荒谬"的设计理念：

- **视觉风格**：现代企业级软件的专业外观
- **交互设计**：模拟项目管理工具的使用体验
- **内容主题**：职场生活的黑色幽默讽刺
- **色彩系统**：企业蓝 + 警戒红 + 荧光绿的经典搭配

## 🚀 部署指南

### GitHub Pages 部署

1. **Fork 本项目**到你的 GitHub 账户

2. **启用 GitHub Pages**
   - 进入项目的 Settings
   - 找到 Pages 选项
   - Source 选择 "Deploy from a branch"
   - Branch 选择 "main"

3. **配置后端服务**
   - 后端需要部署到支持 Python 的平台（如 Heroku、Railway）
   - 更新前端 API 调用地址

### Heroku 部署

1. **创建 Procfile**
```
web: python app.py
```

2. **部署到 Heroku**
```bash
heroku create your-app-name
git push heroku main
```

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

### 开发规范
- 遵循 Python PEP 8 代码规范
- 前端使用现代 ES6+ 语法
- 提交信息使用中文，格式：`类型: 描述`

### 贡献方向
- 🎴 添加新的卡牌和效果
- 👾 设计新的敌人和Boss
- 🏢 创建更多楼层主题
- 🎨 优化视觉效果和动画
- 🐛 修复Bug和性能优化

## 📄 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件。

## 🙏 致谢

- 设计灵感来源于《杀戮尖塔》和现代职场生活
- 感谢所有为职场讽刺贡献素材的打工人们
- 特别感谢那些"永动机咖啡"和"人体工学椅"

---

**免责声明**：本游戏纯属虚构，如有雷同，纯属巧合。玩游戏请适度，注意身体健康。记住，现实中的工作还是要认真对待的！ 🫠